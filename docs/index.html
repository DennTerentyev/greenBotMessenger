<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Green Bot Messenger</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
          integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"/>
    <link rel="stylesheet" type=text/css href="style.css"/>
</head>
<body>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '256489548491612',
            xfbml: true,
            version: 'v3.0'
        });
        FB.AppEvents.logPageView();
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<div class="container">
    <div>
        class="fb-like"
        data-share="true"
        data-width="450"
        data-show-faces="true">
    </div>
    <img class="d-block mx-auto mb-5 mw-100" src="images/header.jpg" alt="CrowdFarming"/>
    <h2 class="font-weight-bold text-muted mb-3 bottom-line">In the beginning was a rabbit, and the rabbit name is
        Vader...</h2>
    <h4 class="font-weight-bold">This is he</h4>
    <img class="d-block mx-auto my-3 mw-100" src="images/vaider.jpeg" alt="The Vaider"/>
    <img align="right" src="images/bot.jpg" height="380px"/>
    <p>And the only thing he loves more than the Death Star is eating green lettuce leaves. So we need your help to give
        him what he wants and make him happy that's why we've created this project.</p>
    <p>We've created a grow box for growing lettuce with a bunch of sensors and switches, and a camera, of course,
        because everything becomes better if you can livestreaming it. That's what we got on our side and you've got the
        <a href="https://www.facebook.com/Green-Bot-Messenger-196489871202541/" target="_blank">Messenger Bot</a> to
        share your thoughts about the better way to grow the most delicious lettuce in the world to pamper the Vaider.
    </p>
    <h4 class="font-weight-bold">How it works</h4>
    <p>The grow box is fully automated and isolated from the world and the only way to change something inside it is to
        make your vote through the <a href="https://www.facebook.com/Green-Bot-Messenger-196489871202541/"
                                      target="_blank">Messenger Bot</a>. To make a more informed decision you need to
        check the current state inside and to do it you can ask the bot to show you the latest sensor data from the grow
        box, it shows you the current temp, humidity, light etc. (we are still developing and connecting more and more
        sensors).
    </p>
    <p>After that, you can choose one of the predefined actions, for example, give more light or less light, or maybe
        more water and so on. Also, you can check the process of the voting, get the live polls and revote if you want
        to.</p>
    <p>Every hour the voting finished and the action that has the largest amount of votes performed and you can see the
        live stream of the action on the Facebook page of our project. After that process starts over and you can check
        the data and vote again.</p>
    <p>When the lettuce ripes all of it goes to the Vader, we don't take a leaf for ourselves.</p>
    <h2 class="font-weight-bold bottom-line mb-3">How it's made</h2>
    <h4 class="font-weight-bold">Architecture overview</h4>
    <img class="d-block mx-auto my-3 mw-100" src="images/components.jpg" alt="GreenFarm Architecture">
    <h4 class="font-weight-bold">Components and integration</h4>
    <p>The brain of our hardware part is Raspberry Pi, all the sensors are connected to it and script gets data from the
        sensors and send it to the Azure IoT Hub, where Azure Function invokes on ever new data, parse it and store to
        the CosmosDB collection.</p>
    <p>All the backend part is hosted in the Microsoft Azure. There are a bunch of Azure functions connected to the
        Messenger bot, they allow users get the last sensors data from the CosmosDB, give a vote for one of the future
        actions (which also stored to the CosmosDB) and live-checking the voting process. Every hour scheduled function
        get all the votes from the collection, find the winner and send an RPC call through the Azure IoT Hub to the
        Raspberry.</p>
    <span>Diagram of Microsoft Azure Functions</span>
    <img class="d-block mx-auto my-3 mw-100" src="images/functions.png" alt="Microsoft Azure Functions">
    <p>In addition to sensors inside, there are several switches on the grow box each of them can turn on/off different
        actions, for example, light, cooler or watering. We have an old-school lego construction where servos connected
        to the to the switches with some kind of "robo-arms" and we can rotate servos to control the switches and
        perform
        actions. So when Raspberry receives the call to action from the cloud it rotates the appropriate servo to
        perform the action.</p>
    <img class="d-block mx-auto my-3 mw-100" src="images/thing.jpg" alt="Thing">
    <p>And as a proof of work every time some action on grow box performed we turn the live streaming on our Facebook
        page to give people the opportunity to see how their decision is implementing.</p>
    <p>Let's grow the lettuce for the rabbit!</p>
    <img class="d-block mx-auto my-3" src="images/qr-code.gif" alt="QR-code">
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
        integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>

</body>
</html>
